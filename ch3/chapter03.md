# HTTP

## HTTP 기초

웹 어플리케이션은 서버가 보낸 HTML,CSS,이미지 등의 리소르 데이터를 사용해 구성된다.
브라우저는 HTTP라는 통신 프로토콜에 따라 서버와 통신해 리소르를 가져오거나 데이터를 생성하고 업데이트하며 삭제한다.

### URL (uniform resource locator)

인터넷에 리소스가 위치하는 장소를 나타내는 문자열

- 스키마명(프로토콜) : https
- 호스트명 : example.com
- 포트번호 : 443
- 경로명 : path/to/index.html

### DNS (domain name system)

사용자가 웹 어플리케이션에 접속할 때, 브라우저는 먼저 DNS 서버에서 해당 URL의 서버 주소를 확인해야한다.

인터넷에 접속한 모든 기기는 IP라는 주소가 할당되는데, 이 주소는 사람이 기억하기에는 난해합니다.
그래서 기억하기 쉬운 호스트명으로 변환해서 사용합니다.

- 브라우저에 호스트명을 기반으로 검색하면, 브라우저는 DNS에 호스트명을 보냅니다.
- DNS에서는 호스트명을 받아서, 그에 맞는 IP주소를 반환해줍니다.
- 그러면 브라우저는 받은 IP를 기반으로 서버에 접속하고 리소스를 요청합니다.

### TCP/IP

TCP/IP는 통신 규악이라고 할 수 있다. 정해진 방식으로만! 통신해야하기 때문입니다.

이는 총 4개의 계층으로 구성되어 있습니다.

- 응용계층 : 애플리케이션 에서 통신한다 (HTTP, SMTP)
- 전송계층 : 인터넷 계층에서 받은 데이터를 애플리케이션 계층으로 전달, 오류 감지 (TCP, UDP)
- 인터넷 계층 : 어떤 컴퓨터로 데이터를 전달할지 결정한다. (IP)
- 네트워크 접속 계층 : 물리적 전기 신호 (유무선 LAN)

### HTTP 메시지

HTTP 통신의 형식입니다.
[두가지 타입, 요청과 응답]

- 요청
  - 요청 라인 (ex. POST / HTTP / 1.1) : 1행
  - 헤더 (ex. Host : localhost:8080) : 1행 ~ 공백전까지
  - 바디 (ex. id=1&message=hello) : 공백 이후
- 응답
  - 상태라인 (ex. HTTP/1.1 200 ok) : 1행
  - 헤더 (ex. content-encoding: gzip) : 1행 ~ 공백전까지
  - 바디 (ex. <!doctype html>) : 공백 이후

### HTTP 메서드

- GET : 리소스를 가져온다.
- HEAD : HTTP 헤더를 가져온다. 바디는 포함 X
- POST : 데이터를 등록하고 리소스를 생성한다.
- PUT : 리소스를 업데이트 한다. 업데이트할 리소스가 없으면 리소스를 생성한다.
- DELETE : 리소스를 삭제한다.
- CONNECT : HTTP에서 다른 프로토콜을 사용한다. 주로 프록시 서버를 통해 HTTPS 통신할 때 사용한다.
- OPTIONS : 통신 옵션을 확인한다. 다른 웹 어플리케이션 간 통신이 가능한지의 여부를 사전에 확인할 때 사용
- TRACE : 서버는 받은 데이터를 그대로 반환한다. 서버 경로 테스트 할 때 사용한다.

### 상태코드

- 1xx : 현재 처리 중인 정보를 전달한다.
- 2xx : 정상 처리된 정보 (200 Ok, 201 Created)
- 3xx : 리다이렉트 관련된 정보를 전달한다. (301 Moved, 302 Found)
- 4xx : 클라이언트 요청에 문제 전달 (400 Bad Request, 404 Not Found)
- 5xx : 서버에 문제가 발생한 상태를 전달 (500 Internal Server Error, 503 Service Unavailable)

### HTTP 헤더

요청과 응답 모두에서 사용한다.

[요청 헤더]

- Host : 서버의 호스트명과 포트 번호를 지정하며 디폴트 포트 번호는 생략한다.
- User-Agent : 요청을 보내는 쪽의 정보를 전달한다.
- Referer : 접속을 요청하는 웹 애플리케이션의 URL을 서버에 전달한다.

[응답 헤더]

- Server : 응답에 사용된 서버의 소프트웨어 정보를 전달한다.
- Location : 리다이렉트 URL을 지정한다.

[엔티티 헤더 : 응답과 요청 모두에서 사용하는 헤더]

- Content-Length : 리소스 크기를 바이트 단위로 표시한다.
- Content-Type : 리소스의 미디어 종류를 표시한다.

### 쿠키를 사용한 상태 관리

HTTP는 원래 문서 전송을 위해 개발된 프로토콜 이라서 브라우저와 서버 간의 상태를 관리할 필요가 없었습니다.
그런데 웹이 발전하면서 데이터 전송을 HTTP로 진행하게 되고 이를 위해 상태를 유지할 필요가 생겼다.
이에 따라, 서버와 통신한 정보를 브라우저 안의 쿠키라는 파일에 보관하는 방식이 생겼다.

대표적으로 로그인 상태관리를 생각하면,

1. 로그인한다.
2. 쿠키에 로그인 정보를 저장 (서버에서 set cookie 헤더 전송)
3. 다음 통신할때는 자동으로 쿠키 정보를 서버에 전송한다.
