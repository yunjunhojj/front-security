# Origin에 의한 애플리케이션 간 접근 제한

잘못된 접근을 막기 위한 동일 출처 정책 (Same Origin Policy)의 구조를 알아본다.
그리고 CORS(cross orgin resource sharing)을 살펴본다.
웹 보안의 기본이므로 확실하게 알아둬야한다.

사이드 채널 공격과 쿠키의 전송을 학습한다.

## 애플리케이션 간 접근 제한의 필요성

iframe을 사용해서 피싱 사이트를 만들어서 개인정보를 탈취하는 범죄가 있다.

## 동일 출처 정책에 의한 보호

- 동일 출처 정책 : 브라우저는 "출처"라는 경계를 설정해 서로의 접근을 제한한다.
  출처와 같은 기능을 통해 개발자는 특별한 대책을 세우지 않아도 다른 웹 애플리케이션에서의 접근을 제한할 수 있다.

출처의 예시
"https://example.com:433/path/to/index.html" 의 url이 있을 때, 출처의 경계는 "https://example.com:433" 이다.

- 출처가 같다 -> 동일출처
- 출처가 다르다 -> 교차출처
  스키마명, 호스트명, 포트번호 중 하나라도 다르면 교차출처

### 동일출처 정책 -> 교차 출처 리소스에 접근을 제한하는 방식

자바스크립트, iframe, <canvas>, web storage와 indexedDB 등의 접근에 제한
반대로, 제한되지 않는 사례

- <script>, <link>, <img>, <video>, <embed>, @font-face
  위의 경우에는 cors와 cross orgin 속성을 사용하여 접근을 제한할 수 있다.

## preflight

서버로 바로 요청을 보내는 Simple Request와는 다르게, 지금 보내는 요청이 유효한지를 확인하기 위해 OPTIONS 메서드로 예비 요청을 보내는 것이다.

- Content-Type이 다음과 같은 GET, HEAD, POST 요청
  - application/x-www-form-urlencoded
  - multipart/form-data
  - text/plain
- 요청에 사용된 XMLHttpRequest.upload 객체에 이벤트 리스너가 등록되어 있지 않을 때
- ReadableStream 객체가 요청에서 사용되지 않을 때

# 4장 정리

- 브라우저는 출처에 따라 접근을 제한한다.
- 출처가 같은 경우에 웹 어플리케이션 간에 접근할 수 있는 구조를 동일 출처 정책이라고 한다.
- CORS를 사용하면 다른 출처 간에도 접근이 가능하다.
- 프로세스를 사이트마다 분리하면 사이드 채널 공격을 막을 수 있다.

# 추가내용

프런트 엔드 개발자는 자신이 구축하는 애플리케이션이 강력하고 잠재적인 위협에 저항할 수 있도록 다양한 보안 원칙을 확실하게 이해해야 합니다. 다음은 프런트엔드 개발자를 위한 주요 보안 지식을 요약한 것입니다.

교차 사이트 스크립팅(XSS) 예방: 프런트 엔드 개발자는 XSS 공격을 인지하고 이를 방지하기 위한 조치를 구현해야 합니다. 여기에는 적절한 입력 유효성 검사, 사용자 입력 삭제, 사용자 생성 콘텐츠를 자동으로 이스케이프 처리하는 프레임워크 또는 라이브러리 사용이 포함됩니다.

컨텐츠 보안 정책(CSP): CSP를 이해하고 구현하면 리소스를 로드할 수 있는 도메인을 지정하여 XSS 공격을 완화하는 데 도움이 되므로 악성 스크립트 실행 위험이 줄어듭니다.

CSRF(교차 사이트 요청 위조) 보호: 프런트 엔드 개발자는 인증된 사용자를 대신하여 무단 요청이 이루어지지 않도록 CSRF 토큰을 구현해야 합니다. 여기에는 각 사용자 세션에 대해 고유한 토큰을 생성하고 서버 측에서 유효성을 검사하는 작업이 포함됩니다.

보안 인증 및 권한 부여: HTTPS 사용, 해싱 및 솔팅을 통해 비밀번호를 안전하게 저장, 필요한 경우 다단계 인증 구현, 세션 하이재킹을 방지하기 위한 사용자 세션의 적절한 처리 등 보안 인증 메커니즘을 보장합니다.

데이터 검증 및 삭제: 클라이언트 측에서 사용자 입력을 검증 및 삭제하여 SQL 인젝션, NoSQL 인젝션과 같은 인젝션 공격을 방지하고 서버로 전송된 데이터가 다시 적절하게 검증 및 삭제되었는지 확인합니다.

보안 통신: 클라이언트와 서버 간의 모든 통신에 HTTPS를 활용하여 전송 중인 데이터를 암호화하고 중간자 공격을 방지합니다. 또한 TLS/SSL과 같은 보안 통신 프로토콜을 이해하고 구현하는 것이 필수적입니다.

클라이언트 측 저장소 취약성 방지: 민감한 데이터 노출이나 변조를 방지하려면 쿠키, localStorage, sessionStorage와 같은 클라이언트 측 저장소 메커니즘에 주의하세요.

보안 헤더: X-Content-Type-Options, X-Frame-Options, Referrer-Policy와 같은 HTTP 보안 헤더를 구성하여 웹 애플리케이션의 보안 태세를 강화하고 다양한 유형의 공격으로부터 보호합니다. .

입력 검증 및 출력 인코딩: SQL 주입, NoSQL 주입과 같은 주입 공격을 방지하기 위해 클라이언트 측에서 사용자 입력을 검증 및 정리하고, 서버로 전송된 데이터가 다시 적절하게 검증 및 정리되었는지 확인합니다.

보안 모범 사례: OWASP(개방형 웹 애플리케이션 보안 프로젝트)와 같은 리소스를 통해 보안 모범 사례, 지침 및 새로운 위협에 대한 업데이트를 유지하여 웹 애플리케이션의 보안 상태를 지속적으로 개선합니다.

이러한 보안 원칙을 숙지함으로써 프런트 엔드 개발자는 안전한 웹 애플리케이션을 구축하고 다양한 보안 위협으로부터 사용자 데이터를 보호하는 데 크게 기여할 수 있습니다.

# 중요성

프런트엔드 보안은 다음과 같은 여러 가지 이유로 중요합니다.

사용자 데이터 보호: 프런트엔드 보안 조치는 개인 정보, 로그인 자격 증명, 금융 세부 정보 등 민감한 사용자 데이터를 무단 액세스, 도난 또는 조작으로부터 보호합니다. 이는 애플리케이션에 대한 사용자의 신뢰와 자신감을 유지하는 데 도움이 됩니다.

공격 예방: 프런트엔드 개발자는 강력한 보안 관행을 구현함으로써 XSS(교차 사이트 스크립팅), CSRF(교차 사이트 요청 위조) 및 주입 공격을 포함한 다양한 사이버 공격의 위험을 완화할 수 있습니다. . 이러한 공격은 데이터 침해, 계정 탈취 및 기타 보안 사고로 이어질 수 있습니다.

애플리케이션 무결성 유지: 프런트 엔드 보안은 코드, 자산 또는 기능에 대한 무단 수정을 방지하여 애플리케이션의 무결성을 보장합니다. 이는 애플리케이션의 안정성, 유용성 및 전반적인 성능을 유지하는 데 도움이 됩니다.

규정 준수: 프런트 엔드 보안 표준 및 모범 사례를 준수하면 GDPR(일반 데이터 보호 규정) 및 HIPAA(건강 보험 이동성 및 책임법)과 같은 업계 규정 및 데이터 보호법을 준수할 수 있습니다. 규정을 준수하지 않을 경우 법적 처벌, 벌금 및 명예 훼손이 발생할 수 있습니다.

명예 손상으로부터 보호: 보안 침해 또는 손상은 조직의 평판과 브랜드 이미지에 심각한 손상을 줄 수 있습니다. 프런트 엔드 보안을 우선시함으로써 개발자는 보안 사고의 위험을 최소화하고 사용자 개인 정보 및 보안을 보호하겠다는 의지를 보여줄 수 있습니다.

향상된 사용자 경험: 프런트 엔드에 보안 조치를 원활하게 구현하면 사용자가 애플리케이션과 상호 작용할 수 있는 안전하고 신뢰할 수 있는 환경을 제공하여 전반적인 사용자 경험이 향상됩니다. 이를 통해 사용자 만족도, 참여도, 충성도가 높아집니다.

비용 절감: 개발 프로세스 초기에 프런트 엔드 보안에 투자하면 향후 비용이 많이 드는 보안 침해, 데이터 유출 및 시스템 가동 중지 시간을 방지하는 데 도움이 될 수 있습니다. 사고가 발생한 후 대응적으로 보안 문제를 해결하는 것보다 사전에 보안 문제를 해결하는 것이 더 비용 효율적입니다.
